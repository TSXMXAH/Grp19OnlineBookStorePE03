@page "/dev/openlibrary-test"
@rendermode InteractiveServer
@inject OpenLibraryService OpenLibraryService

<br />
<br />
<br />

<h3>Open Library API Test</h3>

<button @onclick="TestApi">Fetch</button>

<p>@status</p>
@if (results.Any())
{
    <ul>
        @foreach (var book in results.Take(5))
        {
            <li>@book.Title (@book.First_Publish_Year)</li>
        }
    </ul>
}

@code {
    private string status = "Idle";
    private List<OpenLibraryBookDto> results = new();

    private async Task TestApi()
    {
        status = "Calling Open Library...";
        results = await OpenLibraryService.SearchBooksAsync("software engineering");
        status = $"Fetched {results.Count} books";
    }
}